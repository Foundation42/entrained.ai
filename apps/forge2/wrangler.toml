name = "forge2"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# D1 Database for queryable metadata
[[d1_databases]]
binding = "DB"
database_name = "forge-db"
database_id = "8c49079d-0f51-4a63-ad34-b873e991d791"
migrations_dir = "migrations"

# R2 Buckets
[[r2_buckets]]
binding = "ASSETS"
bucket_name = "forge2-assets"

# KV Namespaces (for fast lookups and caching)
[[kv_namespaces]]
binding = "CACHE"
id = "2f18e4bb3dcf474f81ad678acf045b67"

# Vectorize for semantic search
[[vectorize]]
binding = "VECTORIZE"
index_name = "forge2-assets"

# Workers AI for embeddings
[ai]
binding = "AI"

# Environment variables
[vars]
LLM_PROVIDER = "anthropic"
ANTHROPIC_MODEL = "claude-sonnet-4-5"
GEMINI_MODEL = "gemini-3-flash-preview"
GEMINI_IMAGE_MODEL = "gemini-2.5-flash-image"

# Development overrides
[env.dev]
vars = { LLM_PROVIDER = "anthropic" }

# Production settings
[env.production]
vars = { LLM_PROVIDER = "anthropic" }
